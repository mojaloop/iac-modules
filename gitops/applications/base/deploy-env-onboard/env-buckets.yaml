---
apiVersion: v1
kind: Namespace
metadata:
  name: "${ARGOCD_ENV_env_name}"
  annotations:
    name: "${ARGOCD_ENV_env_name}"
---
apiVersion: infitx.org/v1alpha1
kind: S3BucketClaim
metadata:
  name: "${ARGOCD_ENV_env_name}-loki-bucket"
  namespace: "${ARGOCD_ENV_env_name}"
spec:
  parameters:
    bucketName: "${ARGOCD_ENV_env_name}-loki"
    bucketRegion: ${ARGOCD_ENV_cloud_region}
    forceDestroy: true
    deletionPolicy: "Delete"
    providerConfigName: "aws-cp-upbound-provider-config"
    destinationNamespace:  ${ARGOCD_ENV_env_name}
---
apiVersion: infitx.org/v1alpha1
kind: S3BucketClaim
metadata:
  name: "${ARGOCD_ENV_env_name}-tempo-bucket"
  namespace: "${ARGOCD_ENV_env_name}"
spec:
  parameters:
    bucketName: "${ARGOCD_ENV_env_name}-tempo"
    bucketRegion: ${ARGOCD_ENV_cloud_region}
    forceDestroy: true
    deletionPolicy: "Delete"
    providerConfigName: "aws-cp-upbound-provider-config"
    destinationNamespace:  ${ARGOCD_ENV_env_name}
---
apiVersion: infitx.org/v1alpha1
kind: S3BucketClaim
metadata:
  name: "${ARGOCD_ENV_env_name}-velero-bucket"
  namespace: "${ARGOCD_ENV_env_name}"
spec:
  parameters:
    bucketName: "${ARGOCD_ENV_env_name}-velero"
    bucketRegion: ${ARGOCD_ENV_cloud_region}
    forceDestroy: true
    deletionPolicy: "Delete"
    providerConfigName: "aws-cp-upbound-provider-config"
    destinationNamespace:  ${ARGOCD_ENV_env_name}
---
apiVersion: infitx.org/v1alpha1
kind: S3BucketClaim
metadata:
  name: "${ARGOCD_ENV_env_name}-percona-bucket"
  namespace: "${ARGOCD_ENV_env_name}"
spec:
  parameters:
    bucketName: "${ARGOCD_ENV_env_name}-percona"
    bucketRegion: ${ARGOCD_ENV_cloud_region}
    forceDestroy: true
    deletionPolicy: "Delete"
    providerConfigName: "aws-cp-upbound-provider-config"
    destinationNamespace:  ${ARGOCD_ENV_env_name}
