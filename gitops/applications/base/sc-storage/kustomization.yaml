apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - namespace.yaml
  - objectstore-certs.yaml
  - ceph-cluster-crs.yaml
  - ceph-blockpools-crs.yaml
  - ceph-objectstore-crs.yaml
  - ceph-filsystem-crs.yaml
  - storage-classes.yaml
  - ceph-objectstore-service.yaml
  - rbac.yaml
  - rgw-endpoint-job.yaml

helmCharts:
  - name: rook-ceph
    releaseName: rook-ceph
    version: ${ARGOCD_ENV_rook_ceph_version}
    repo: https://charts.rook.io/release
    valuesFile: rook-ceph-values.yaml
    namespace: ${ARGOCD_ENV_storage_namespace}
    includeCRDs: true

  # - name: rook-ceph-cluster
  #   releaseName: rook-ceph-cluster
  #   version: ${ARGOCD_ENV_rook_ceph_version}
  #   repo: https://charts.rook.io/release
  #   valuesFile: rook-ceph-cluster-values.yaml
  #   namespace: ${ARGOCD_ENV_storage_namespace}
  #   includeCRDs: true
patchesStrategicMerge:
  - patch-rook-ceph-clusterrole.yaml
