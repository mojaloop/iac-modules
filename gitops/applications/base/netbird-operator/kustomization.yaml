apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - namespace.yaml
helmCharts:
  - name: kubernetes-operator
    releaseName: ${ARGOCD_ENV_netbird_operator_app_name}
    version: ${ARGOCD_ENV_netbird_operator_helm_version}
    repo: https://netbirdio.github.io/kubernetes-operator
    valuesFile: netbird-operator-values.yaml
    namespace: ${ARGOCD_ENV_netbird_operator_namespace}
    includeCRDs: true

patches:
  - target:
      kind: Deployment
    patch: |
      - op: add
        path: "/metadata/annotations/argocd.argoproj.io~1sync-wave"
        value: ${ARGOCD_ENV_vault_config_operator_namespace}
